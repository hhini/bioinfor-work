{
  "hash": "560e88227d91a45cf0bbeb4a660c48ab",
  "result": {
    "engine": "jupyter",
    "markdown": "---\nauthors:\n  - name: 周杰 113120230073\n    affiliation: The GanNan medical University \n    roles: writing\n    corresponding: true\nbibliography: references.bib\n---\n\n\n## n4 打印1~1000之间包含3的数字\n\n编程实现：打印出1~1000之间包含3的数字。如果3是连在一起的（如233）则在数字前加上&；如果这个数字是质数则在数字后加上*。\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nimport math\n\ndef is_prime(n):\n    \"\"\"判断一个数是否为质数\"\"\"\n    if n < 2:\n        return False\n    if n == 2:\n        return True\n    if n % 2 == 0:\n        return False\n    # 只需要检查到sqrt(n)\n    for i in range(3, int(math.sqrt(n)) + 1, 2):\n        if n % i == 0:\n            return False\n    return True\n\ndef has_consecutive_threes(n):\n    \"\"\"判断数字是否包含连续的3\"\"\"\n    num_str = str(n)\n    return '33' in num_str\n\ndef contains_three(n):\n    \"\"\"判断数字是否包含3\"\"\"\n    return '3' in str(n)\n\ndef format_number(n):\n    \"\"\"格式化数字，添加相应的标记\"\"\"\n    result = str(n)\n    \n    # 检查是否包含连续的3\n    if has_consecutive_threes(n):\n        result = '&' + result\n    \n    # 检查是否为质数\n    if is_prime(n):\n        result = result + '*'\n    \n    return result\n\n# 主程序：打印1~1000之间包含3的数字\nprint(\"1~1000之间包含3的数字：\")\nprint(\"说明：&表示包含连续3，*表示质数\")\nprint(\"-\" * 50)\n\ncount = 0\nfor i in range(1, 1001):\n    if contains_three(i):\n        formatted = format_number(i)\n        print(f\"{formatted:>6}\", end=\" \")\n        count += 1\n        # 每行显示10个数字\n        if count % 10 == 0:\n            print()\n\nprint(f\"\\n\\n总共找到 {count} 个包含3的数字\")\n\n# 统计信息\nconsecutive_count = 0\nprime_count = 0\nboth_count = 0\n\nfor i in range(1, 1001):\n    if contains_three(i):\n        has_consecutive = has_consecutive_threes(i)\n        is_prime_num = is_prime(i)\n        \n        if has_consecutive:\n            consecutive_count += 1\n        if is_prime_num:\n            prime_count += 1\n        if has_consecutive and is_prime_num:\n            both_count += 1\n\nprint(f\"\\n统计信息：\")\nprint(f\"包含连续3的数字：{consecutive_count} 个\")\nprint(f\"质数：{prime_count} 个\")\nprint(f\"既是质数又包含连续3：{both_count} 个\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n1~1000之间包含3的数字：\n说明：&表示包含连续3，*表示质数\n--------------------------------------------------\n    3*    13*    23*     30    31*     32    &33     34     35     36 \n   37*     38     39    43*    53*     63    73*    83*     93   103* \n  113*    123    130   131*    132   &133    134    135    136   137* \n   138   139*    143    153   163*   173*    183   193*    203    213 \n  223*    230    231    232  &233*    234    235    236    237    238 \n  239*    243    253   263*    273   283*   293*    300    301    302 \n   303    304    305    306   307*    308    309    310   311*    312 \n  313*    314    315    316   317*    318    319    320    321    322 \n   323    324    325    326    327    328    329   &330  &331*   &332 \n  &333   &334   &335   &336  &337*   &338   &339    340    341    342 \n   343    344    345    346   347*    348   349*    350    351    352 \n  353*    354    355    356    357    358   359*    360    361    362 \n   363    364    365    366   367*    368    369    370    371    372 \n  373*    374    375    376    377    378   379*    380    381    382 \n  383*    384    385    386    387    388   389*    390    391    392 \n   393    394    395    396   397*    398    399    403    413    423 \n   430   431*    432  &433*    434    435    436    437    438   439* \n  443*    453   463*    473    483    493   503*    513   523*    530 \n   531    532   &533    534    535    536    537    538    539    543 \n   553   563*    573    583   593*    603   613*    623    630   631* \n   632   &633    634    635    636    637    638    639   643*   653* \n   663   673*   683*    693    703    713    723    730    731    732 \n &733*    734    735    736    737    738   739*   743*    753    763 \n  773*    783    793    803    813   823*    830    831    832   &833 \n   834    835    836    837    838   839*    843   853*   863*    873 \n  883*    893    903    913    923    930    931    932   &933    934 \n   935    936   937*    938    939    943   953*    963    973   983* \n   993 \n\n总共找到 271 个包含3的数字\n\n统计信息：\n包含连续3的数字：19 个\n质数：66 个\n既是质数又包含连续3：5 个\n```\n:::\n:::\n\n\n**代码讲解：**\n\n1. **质数判断函数 `is_prime(n)`**：\n   - 小于2的数不是质数\n   - 2是唯一的偶质数\n   - 其他偶数都不是质数\n   - 对于奇数，只需要检查到√n即可\n\n2. **连续3检测函数 `has_consecutive_threes(n)`**：\n   - 将数字转换为字符串\n   - 检查是否包含'33'子串\n\n3. **包含3检测函数 `contains_three(n)`**：\n   - 将数字转换为字符串\n   - 检查是否包含'3'字符\n\n4. **格式化函数 `format_number(n)`**：\n   - 先检查连续3，如果是则在前面加'&'\n   - 再检查质数，如果是则在后面加'*'\n\n5. **主程序**：\n   - 遍历1~1000的所有数字\n   - 筛选出包含3的数字\n   - 按格式要求输出\n   - 提供统计信息\n\n## n5 求所有四位回文数\n\n\"回文数\"是一种特殊数字，就是说一个数字从左边读和从右边读的结果是一模一样的。\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\ndef is_palindrome(n):\n    \"\"\"判断一个数是否为回文数\"\"\"\n    num_str = str(n)\n    return num_str == num_str[::-1]\n\ndef find_four_digit_palindromes():\n    \"\"\"找出所有四位回文数\"\"\"\n    palindromes = []\n    for i in range(1000, 10000):  # 四位数的范围是1000-9999\n        if is_palindrome(i):\n            palindromes.append(i)\n    return palindromes\n\n# 找出所有四位回文数\nfour_digit_palindromes = find_four_digit_palindromes()\n\nprint(\"所有四位回文数：\")\nprint(\"-\" * 30)\n\n# 按行显示，每行10个\nfor i, num in enumerate(four_digit_palindromes, 1):\n    print(f\"{num:>6}\", end=\" \")\n    if i % 10 == 0:\n        print()\n\nprint(f\"\\n\\n总共找到 {len(four_digit_palindromes)} 个四位回文数\")\n\n# 验证几个例子\nprint(\"\\n验证示例：\")\nexamples = [1221, 1331, 1441, 1551]\nfor num in examples:\n    print(f\"{num} 是回文数：{is_palindrome(num)}\")\n\n# 分析回文数的特点\nprint(\"\\n回文数特点分析：\")\nprint(\"四位回文数的形式为：abba\")\nprint(\"其中a是千位和个位数字，b是百位和十位数字\")\nprint(\"a的取值范围：1-9（不能为0，否则不是四位数）\")\nprint(\"b的取值范围：0-9\")\nprint(\"因此四位回文数共有：9 × 10 = 90 个\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n所有四位回文数：\n------------------------------\n  1001   1111   1221   1331   1441   1551   1661   1771   1881   1991 \n  2002   2112   2222   2332   2442   2552   2662   2772   2882   2992 \n  3003   3113   3223   3333   3443   3553   3663   3773   3883   3993 \n  4004   4114   4224   4334   4444   4554   4664   4774   4884   4994 \n  5005   5115   5225   5335   5445   5555   5665   5775   5885   5995 \n  6006   6116   6226   6336   6446   6556   6666   6776   6886   6996 \n  7007   7117   7227   7337   7447   7557   7667   7777   7887   7997 \n  8008   8118   8228   8338   8448   8558   8668   8778   8888   8998 \n  9009   9119   9229   9339   9449   9559   9669   9779   9889   9999 \n\n\n总共找到 90 个四位回文数\n\n验证示例：\n1221 是回文数：True\n1331 是回文数：True\n1441 是回文数：True\n1551 是回文数：True\n\n回文数特点分析：\n四位回文数的形式为：abba\n其中a是千位和个位数字，b是百位和十位数字\na的取值范围：1-9（不能为0，否则不是四位数）\nb的取值范围：0-9\n因此四位回文数共有：9 × 10 = 90 个\n```\n:::\n:::\n\n\n**代码讲解：**\n\n1. **回文数判断函数 `is_palindrome(n)`**：\n   - 将数字转换为字符串\n   - 使用切片`[::-1]`反转字符串\n   - 比较原字符串和反转后的字符串是否相等\n\n2. **查找四位回文数函数 `find_four_digit_palindromes()`**：\n   - 遍历1000到9999的所有四位数\n   - 对每个数调用回文数判断函数\n   - 收集所有回文数到列表中\n\n3. **数学分析**：\n   - 四位回文数的形式为abba\n   - 千位数字a：1-9（9种选择）\n   - 百位数字b：0-9（10种选择）\n   - 十位数字：必须等于百位数字b\n   - 个位数字：必须等于千位数字a\n   - 总数：9 × 10 = 90个\n\n## n6 模拟打印超市购物小票升级版\n\n输入商品名称、价格、数量，算出应付金额。用户输入整钱，实现找零和抹零的功能，最后打印购物小票。\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\nimport datetime\n\nclass ShoppingCart:\n    \"\"\"购物车类\"\"\"\n    def __init__(self):\n        self.items = []  # 存储商品信息\n    \n    def add_item(self, name, price, quantity):\n        \"\"\"添加商品到购物车\"\"\"\n        self.items.append({\n            'name': name,\n            'price': price,\n            'quantity': quantity,\n            'subtotal': price * quantity\n        })\n    \n    def calculate_total(self):\n        \"\"\"计算总金额\"\"\"\n        return sum(item['subtotal'] for item in self.items)\n    \n    def print_receipt(self, paid_amount):\n        \"\"\"打印购物小票\"\"\"\n        total = self.calculate_total()\n        change = paid_amount - total\n        \n        print(\"=\" * 50)\n        print(\"           欢迎光临超市\")\n        print(\"=\" * 50)\n        print(f\"购物时间：{datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\")\n        print(\"-\" * 50)\n        print(f\"{'商品名称':<15} {'单价':<8} {'数量':<6} {'小计':<10}\")\n        print(\"-\" * 50)\n        \n        for item in self.items:\n            print(f\"{item['name']:<15} {item['price']:<8.2f} {item['quantity']:<6} {item['subtotal']:<10.2f}\")\n        \n        print(\"-\" * 50)\n        print(f\"{'应付金额：':<30} {total:.2f} 元\")\n        print(f\"{'实付金额：':<30} {paid_amount:.2f} 元\")\n        \n        if change > 0:\n            print(f\"{'找零：':<30} {change:.2f} 元\")\n        elif change < 0:\n            print(f\"{'还需支付：':<30} {abs(change):.2f} 元\")\n        else:\n            print(f\"{'找零：':<30} 0.00 元\")\n        \n        print(\"=\" * 50)\n        print(\"谢谢惠顾，欢迎下次光临！\")\n        print(\"=\" * 50)\n\ndef round_down(amount):\n    \"\"\"抹零功能：向下取整到角\"\"\"\n    return int(amount * 10) / 10\n\ndef main():\n    \"\"\"主程序\"\"\"\n    cart = ShoppingCart()\n    \n    print(\"=== 超市购物系统 ===\")\n    print(\"请输入商品信息（输入空商品名结束）\")\n    \n    # 添加商品\n    while True:\n        name = input(\"商品名称：\").strip()\n        if not name:\n            break\n        \n        try:\n            price = float(input(\"单价（元）：\"))\n            quantity = int(input(\"数量：\"))\n            \n            if price < 0 or quantity <= 0:\n                print(\"价格不能为负数，数量必须大于0！\")\n                continue\n                \n            cart.add_item(name, price, quantity)\n            print(f\"已添加：{name} × {quantity} = {price * quantity:.2f} 元\")\n            \n        except ValueError:\n            print(\"输入格式错误，请重新输入！\")\n            continue\n    \n    if not cart.items:\n        print(\"购物车为空，程序结束。\")\n        return\n    \n    # 计算总金额\n    total = cart.calculate_total()\n    print(f\"\\n购物车总金额：{total:.2f} 元\")\n    \n    # 抹零功能\n    use_round_down = input(\"是否使用抹零功能？(y/n): \").strip().lower() == 'y'\n    if use_round_down:\n        total = round_down(total)\n        print(f\"抹零后金额：{total:.2f} 元\")\n    \n    # 支付\n    while True:\n        try:\n            paid = float(input(f\"请输入支付金额（至少 {total:.2f} 元）：\"))\n            if paid >= total:\n                break\n            else:\n                print(\"支付金额不足！\")\n        except ValueError:\n            print(\"请输入有效的数字！\")\n    \n    # 打印小票\n    cart.print_receipt(paid)\n\n# 演示模式（非交互式）\ndef demo_mode():\n    \"\"\"演示模式，自动添加商品并打印小票\"\"\"\n    print(\"=== 演示模式 ===\")\n    cart = ShoppingCart()\n    \n    # 添加示例商品\n    cart.add_item(\"苹果\", 5.8, 3)\n    cart.add_item(\"牛奶\", 12.5, 2)\n    cart.add_item(\"面包\", 8.9, 1)\n    cart.add_item(\"鸡蛋\", 6.2, 2)\n    \n    total = cart.calculate_total()\n    print(f\"购物车总金额：{total:.2f} 元\")\n    \n    # 演示抹零功能\n    total_rounded = round_down(total)\n    print(f\"抹零后金额：{total_rounded:.2f} 元\")\n    \n    # 模拟支付\n    paid_amount = 50.0\n    print(f\"支付金额：{paid_amount:.2f} 元\")\n    \n    # 打印小票\n    cart.print_receipt(paid_amount)\n\n# 运行演示\nif __name__ == \"__main__\":\n    demo_mode()\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n=== 演示模式 ===\n购物车总金额：63.70 元\n抹零后金额：63.70 元\n支付金额：50.00 元\n==================================================\n           欢迎光临超市\n==================================================\n购物时间：2025-10-15 08:53:10\n--------------------------------------------------\n商品名称            单价       数量     小计        \n--------------------------------------------------\n苹果              5.80     3      17.40     \n牛奶              12.50    2      25.00     \n面包              8.90     1      8.90      \n鸡蛋              6.20     2      12.40     \n--------------------------------------------------\n应付金额：                          63.70 元\n实付金额：                          50.00 元\n还需支付：                          13.70 元\n==================================================\n谢谢惠顾，欢迎下次光临！\n==================================================\n```\n:::\n:::\n\n\n**代码讲解：**\n\n1. **ShoppingCart类**：\n   - `__init__()`: 初始化空购物车\n   - `add_item()`: 添加商品，计算小计\n   - `calculate_total()`: 计算总金额\n   - `print_receipt()`: 格式化打印购物小票\n\n2. **抹零功能 `round_down()`**：\n   - 将金额向下取整到角（0.1元）\n   - 例如：12.67元 → 12.6元\n\n3. **主程序功能**：\n   - 循环输入商品信息\n   - 数据验证（价格非负，数量为正）\n   - 计算总金额\n   - 可选择抹零功能\n   - 支付金额验证\n   - 打印格式化的购物小票\n\n4. **小票格式**：\n   - 包含超市名称、购物时间\n   - 商品列表（名称、单价、数量、小计）\n   - 应付金额、实付金额、找零\n   - 美观的边框和分隔线\n\n5. **演示模式**：\n   - 自动添加示例商品\n   - 展示抹零功能\n   - 模拟支付过程\n   - 打印完整小票\n\n",
    "supporting": [
      "python_files"
    ],
    "filters": []
  }
}